# Users-and-store
HTTP сервер, умеющий создавать, изменять и удалять записи двух типов:

Информация о покупателе
| Фамилия | Имя | Отчество | Возраст | Дата регистрации |
|------------------|---------------------|------------------------|-------------|--------------------|

Информация о магазине
| Название | Адрес | Работающий или нет | Владелец | 
|------------------|---------------------|------------------------|-------------|

Данные хранятся в базе данных под управлением СУБД **PostgreSQL**

Входными и выходными параметрами в  HTTP  запросах являются данные в формате  JSON

Также сервис умеет искать по фамилии и названию магазина.


## Инструкция для запуска

### Запуск с использованием Docker
Скопируйте данный репозиторий 
```
git clone https://github.com/RomanMRR/Users-and-store.git
```
Перейдите в папку проекта
```
cd Users-and-store
```
Запустите
```
docker-compose up 
```

## Работа с сервисом
### Создание новой записи
Для создания нового пользователя необходимо выполнить следующий запрос
```
POST localhost:8080/create_user
```
Передаются следующие параметры
Имя | Тип | Обязательный | Описание
--- | --- |------------ | ---
name | строка | да | имя пользователя
surname | строка | да | фамилия  
patronymic | строка | да | отчество
age | число | нет | возраст

Для создания новой записи о магазине необходимо выполнить следующий запрос
```
POST localhost:8080/create_shop
```
Передаются следующие параметры
Имя | Тип | Обязательный | Описание
--- | --- |------------ | ---
name | строка | да | название магазина
address | строка | да | адрес магазина  
working | логический | да | работающий или нет
owner | строка | нет | владелец

Пример запроса для магазина:
```javascript
{
    "name": "Wildberries",
    "address": "Prospect street",
    "Working": true,
    "Owner": "boss"
}
```

Успешный ответ приходит с кодом `200 ОК` и содержит данные о созданной записи:
```javascript
{
    "result": {"id":1,
                "name":"Wildberries",
                "address":"Prospect street",
                "working":true,
                "owner":"boss"}
}
```
### Поиск записей
Для поиска пользователя необходимо выполнить следующий запрос
```
GET localhost:8080/find_user
```
Передаются следующие параметры
Имя | Тип | Обязательный | Описание
--- | --- |------------ | ---
surname | строка | да | фамилия  

Для поиска магазина необходимо выполнить следующий запрос
```
GET localhost:8080/find_shop
```
Передаются следующие параметры
Имя | Тип | Обязательный | Описание
--- | --- |------------ | ---
name | строка | да | название магазина


Пример запроса для магазина:
```javascript
{
    "name": "Wildberries"
}
```

Успешный ответ приходит с кодом `200 ОК` и содержит данные о найденной записи:
```javascript
{
    "result":[{"id":1,
                "name":"Wildberries",
                "address":"Prospect street",
                "working":true,
                "owner":"boss"}]
}
```

### Редактирование записей
Для изменения данных о пользователе необходимо выполнить следующий запрос
```
PUT localhost:8080/update_user
```
Передаются следующие параметры
Имя | Тип | Обязательный | Описание
--- | --- |------------ | ---
name | строка | нет | имя пользователя
surname | строка | нет | фамилия  
patronymic | строка | нет | отчество
age | число | нет | возраст
registration_date | дата | нет | дата регистрации пользователя

Для изменения данных о магазине необходимо выполнить следующий запрос
```
PUT localhost:8080/update_shop
```
Передаются следующие параметры
Имя | Тип | Обязательный | Описание
--- | --- |------------ | ---
name | строка | нет | название магазина
address | строка | нет | адрес магазина  
working | логический | нет | работающий или нет
owner | строка | нет | владелец

Пример запроса для пользователя:
```javascript
{
    "id" : 1,
    "Age": 21
}
```

Успешный ответ приходит с кодом `200 ОК` и содержит иформацию об успешности операции:
```javascript
{
    {"result":"ok"}
}
```

### Удаление записей
Для удаления данных о пользователе необходимо выполнить следующий запрос
```
DELETE localhost:8080/delete_user
```
Передаются следующие параметры
Имя | Тип | Обязательный | Описание
--- | --- |------------ | ---
id | число | да | уникальный идентификатор пользователя


Для удаления данных о магазине необходимо выполнить следующий запрос
```
DELETE localhost:8080/delete_shop
```
Передаются следующие параметры
Имя | Тип | Обязательный | Описание
--- | --- |------------ | ---
id | число | да | уникальный идентификатор магазина

Пример запроса для пользователя:
```javascript
{
    "id" : 2
}
```

Успешный ответ приходит с кодом `200 ОК` и содержит иформацию об успешности операции:
```javascript
{
    {"result":"deleted user 2"}
}
```

